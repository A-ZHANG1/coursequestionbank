
- problems = problems.select{|p| can? :read, p}
- group_id = local_assigns[:group_id].nil? ? 0 : group_id

- if problems.empty? and !local_assigns[:empty_msg].nil?
  %h3= empty_msg

- else

  %div.table-responsive.problem_table
    %table.table.table-striped
      %thead
        %tr
          - columns.each do |col|
            - if col == :checkbox
              %th= check_box_tag nil, 1, false, :id => "check_all_#{group_id}", :class => 'checkbox check_all', :style => 'display: none'
            - elsif col == :problem
              %th Question Text
            - elsif col == :tags
              %th Tags

      %tbody
        - problems.each do |problem|
          %tr
            - columns.each do |col|
              %td= render :partial => 'problems/student_problem_data', :locals => {:problem => problem, :column => col, :group_id => group_id}
