// %div.container-fluid
//   %h4 Your current permission level is #{@current_user.privilege}. 
//   -if @unauthorized_users.empty?
//     %p There are currently no users pending authorization.
//   -else
//     %p The following users have requested access to the site. Please authorize or deny access.

//     %div.table-responsive
//       %table.table.table-striped#problems
//         %thead
//           %tr
//           %th
//           %th Username
//           %th Name
//           %th Email
//           %th Provider
//           %th
//         %tbody
//           - @unauthorized_users.each do |user|
//             %tr
//             %td= image_tag user.provider_image, size: "30x30"
//             %td= link_to user.username, "https://github.com/#{user.username}"
//             %td= user.name
//             %td= user.provider_email
//             %td= user.provider
//             %td
//               =link_to 'authorize', authorize_path("authorize", user), :class => 'btn btn-info', :id=> 'authorize'
//               =link_to 'deny', authorize_path("deny", user), :method=> :get, :class => 'btn btn-warning', :id=> 'deny'

//   %hr
//   %h4 Give permisions to users manually:
//   = form_tag whitelist_path, :method => :get, :id => "whitelist_form", class: 'form-inline' do
//     %div.form-group
//       = label_tag(:username, "Github Username:")
//       = text_field_tag(:username, params[:username], class: 'form-control', placeholder: "GitHub username")
//     %div.form-group
//       = label_tag(:privilege, "Access level:")
//       = select_tag(:access, options_for_select(["instructor", "admin"]), class: 'form-control')
    
//       = submit_tag 'Add', :id => "whitelist_submit", :class => 'btn btn-info'


%div.section_title 
  %h3 Administration


%div.section_options
  %p.btn.btn-primary Disable whitelist


%div.section_body.section_body_pad
  
  %div.table-responsive
    %table.table.whitelist-table
      %thead
        %tr
          %th Username
          %th Provider
          %th Privilege
          %th
          %th
      
      %tbody
        %tr#whitelist-new
          %td= text_field_tag :username, nil, :id => nil, :class => 'form-control', :form => "whitelist-form-new", :placeholder => 'Username'
          %td= select_tag :provider, options(Whitelist.providers, 'Provider'), :id => nil, :class => 'form-control', :form => "whitelist-form-new"
          %td= select_tag :privilege, options(Whitelist.privilege_levels, 'Privilege'), :id => nil, :class => 'form-control', :form => "whitelist-form-new"
          %td
            = form_tag update_whitelist_path, :id => "whitelist-form-new" do
              = submit_tag 'Add to whitelist', :class => 'btn btn-primary'
          %td

        - @whitelist.each do |entry|
          %tr
            %td= text_field_tag :username, nil, :id => nil, :class => 'form-control', :value => entry.username, :form => "whitelist-form-#{entry.id}"
            %td= select_tag :provider, options(Whitelist.providers, entry.provider), :id => nil, :class => 'form-control', :form => "whitelist-form-#{entry.id}"
            %td= select_tag :privilege, options(Whitelist.privilege_levels, entry.privilege), :id => nil, :class => 'form-control', :form => "whitelist-form-#{entry.id}"
            %td
              = form_tag update_whitelist_path, :id => "whitelist-form-#{entry.id}" do
                = submit_tag 'Update', :class => 'btn btn-primary'
            %td X
